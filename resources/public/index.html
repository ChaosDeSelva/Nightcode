<!doctype html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="paren-soup-light.css">
		<style>
			@font-face {
				font-family: 'Fira Code';
				src: url('fonts/FiraCode-Regular.otf') format('opentype');
			}
			html, body, .paren-soup {
				font-family: 'Fira Code';
				height: 100%;
				margin: 0;
			}
			html, body {
				overflow: hidden;
			}
			.paren-soup {
				overflow: auto;
			}
			.paren-soup .content {
				min-height: 100%;
				overflow: hidden;
			}
		</style>
		<!-- script type='text/javascript' src='http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js'></script -->
	</head>
	<body>
		<div class="paren-soup">
			<div class="instarepl"></div>
			<div class="numbers"></div>
			<div class="content" contenteditable="true" id="content"></div>
		</div>
		<script type='text/javascript'>
			function init() {
				var script = document.createElement('script');
				script.type = 'text/javascript';
				script.async = true;
				script.src = 'paren-soup.js';
				document.body.appendChild(script);
			}
		
			function getTextContent() {
				return document.getElementById('content').textContent;
			}

			var lastTextContent = "";

			function markClean() {
				lastTextContent = getTextContent();
				window.java.onchange();
			}

			function isClean() {
				return lastTextContent == getTextContent();
			}
			
			window.onload = function() {
				if (window.java) {
					window.java.onload();
					window.onkeyup = function(e) {
						window.java.onchange();
					};
					markClean();
				}

				init();

				if (window.java) {
					window.java.onchange();
				}
			};

			window.oncontextmenu = function(e) {
				return e.target && e.target.id == "content";
			};
		</script>
	</body>
</html>
